{% load static %}
<aside class="app-sidebar shadow"
       style="background-color: #1e40af;"
       data-bs-theme="dark">

  <!--begin::Sidebar Brand-->
  <div class="sidebar-brand" style="color: white; font-size: 1rem; margin-left: -80px;">
    <a href="{% url 'staff_home' %}" class="brand-link">
      <div class="d-flex align-items-center mb-2">
        <img
          src="{% static 'dist/assets/img/mohamed.JPG' %}"
          alt="AdminLTE Logo"
          class="brand-image opacity-75 shadow me-2"
          style="opacity: .8"
        >
        <span class="fw-light" style="color: white; font-size: 1rem; ">Administrateur</span>
      </div>
    </a>
  </div>
  <!--begin::Sidebar Wrapper-->
  <div class="sidebar-wrapper">
    <!-- User Panel -->
    <div class="user-panel mt-3 pb-3 mb-3 d-flex border-bottom">
      <div class="image">
        <img src="{% static 'dist/assets/img/Bamalang.jpg' %}"
             alt="User Image"
             class="rounded-circle elevation-2 me-2"
             style="width: 30px; height: 30px; object-fit: cover;">
      </div>
      <div class="info">
        <a href="{% url 'profile_admin' %}" class="d-block text-white text-decoration-none">
          {{ user.username }}
        </a>
        <span class="fw-light" style="color: #c2c7d0; font-size: 0.8rem;">Admin</span>
      </div>
    </div>

    <nav class="mt-2" style="color: white; font-size: 1rem; margin-left: -15px;" >
      <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

        <!-- Staff Management -->
        <li class="nav-item">
          {% url 'add_staff' as add_staff %}
          <a href="{{ add_staff }}" class="nav-link {% if request.path == add_staff %} active {% endif %}">
            <i class="nav-icon bi bi-person-plus me-2"></i>
            <span>Add Staff</span>
          </a>
        </li>

        <li class="nav-item">
          {% url 'manage_staff' as manage_staff %}
          <a href="{{ manage_staff }}" class="nav-link {% if request.path == manage_staff %} active {% endif %}">
            <i class="nav-icon bi bi-people-fill me-2"></i>
            <span>Manage Staff</span>
          </a>
        </li>

        <!-- Student Management -->
        <li class="nav-item">
          {% url 'add_student' as add_student %}
          <a href="{{ add_student }}" class="nav-link {% if request.path == add_student %} active {% endif %}">
            <i class="nav-icon bi bi-person-plus me-2"></i>
            <span>Add Student</span>
          </a>
        </li>

        <li class="nav-item">
          {% url 'manage_student' as manage_student %}
          <a href="{{ manage_student }}" class="nav-link {% if request.path == manage_student %} active {% endif %}">
            <i class="nav-icon bi bi-people me-2"></i>
            <span>Manage Student</span>
          </a>
        </li>
       <li class="nav-item">
        {% url 'student_validation' as student_validation %}
        <a href="{{ student_validation }}" class="nav-link {% if request.path == student_validation %} active {% endif %}">
          <i class="nav-icon bi bi-person-check me-2"></i>
          <span>Validation étudiants</span>
          {% if pending_count > 0 %}
            <span class="badge bg-danger rounded-pill ms-auto">{{ pending_count }}</span>
          {% endif %}
        </a>
      </li>

        <!-- Course Management -->
        <li class="nav-item">
          {% url 'liste_des_inscrits' as liste_des_inscrits %}
          <a href="{{ liste_des_inscrits }}" class="nav-link {% if request.path == liste_des_inscrits %} active {% endif %}">
            <i class="nav-icon bi bi-journal-plus me-2"></i>
            <span>List des inscrits</span>
          </a>
        </li>
        <!-- Course Management -->
        <li class="nav-item">
  {# On pointe vers la VUE qui liste les paiements, pas vers l'action de validation #}
  {% url 'paiement_validation' as paiement_url %}
  <a href="{{ paiement_url }}" class="nav-link {% if request.path == paiement_url %} active {% endif %}">
    <i class="nav-icon bi bi-cash-stack me-2"></i>
    <span>Paiements en Attente</span>

    {# Ajout du badge de notification pour l'admin #}
    {% if pending_count > 0 %}
      <span class="badge bg-warning text-dark rounded-pill ms-auto">
        {{ pending_count }}
      </span>
    {% endif %}
  </a>
</li>



        <!-- Course Management -->
        <li class="nav-item">
          {% url 'add_courses' as add_courses %}
          <a href="{{ add_courses }}" class="nav-link {% if request.path == add_courses %} active {% endif %}">
            <i class="nav-icon bi bi-journal-plus me-2"></i>
            <span>Add Course</span>
          </a>
        </li>

        <li class="nav-item">
          {% url 'manage_courses' as manage_courses %}
          <a href="{{ manage_courses }}" class="nav-link {% if request.path == manage_courses %} active {% endif %}">
            <i class="nav-icon bi bi-journals me-2"></i>
            <span>Manage Course</span>
          </a>
        </li>

        <!-- Subject Management -->
        <li class="nav-item">
          {% url 'add_subject' as add_subject %}
          <a href="{{ add_subject }}" class="nav-link {% if request.path == add_subject %} active {% endif %}">
            <i class="nav-icon bi bi-journal-plus me-2"></i>
            <span>Add Subject</span>
          </a>
        </li>

        <li class="nav-item">
          {% url 'manage_subject' as manage_subject %}
          <a href="{{ manage_subject }}" class="nav-link {% if request.path == manage_subject %} active {% endif %}">
            <i class="nav-icon bi bi-journals me-2"></i>
            <span>Manage Subject</span>
          </a>
        </li>

        <!-- Session Management -->
        <li class="nav-item">
          {% url 'manage_session' as manage_session %}
          <a href="{{ manage_session }}" class="nav-link {% if request.path == manage_session %} active {% endif %}">
            <i class="nav-icon bi bi-calendar-range me-2"></i>
            <span>Add Session</span>
          </a>
        </li>

        <!-- Feedback Management -->
        <li class="nav-item">
          {% url 'feedback_message_student' as feedback_message_student %}
          <a href="{{ feedback_message_student }}" class="nav-link {% if request.path == feedback_message_student %} active {% endif %}">
            <i class="nav-icon bi bi-chat-dots me-2"></i>
            <span>Student Feedback</span>
          </a>
        </li>

        <li class="nav-item">
          {% url 'feedback_message_staff' as feedback_message_staff %}
          <a href="{{ feedback_message_staff }}" class="nav-link {% if request.path == feedback_message_staff %} active {% endif %}">
            <i class="nav-icon bi bi-chat-left-text me-2"></i>
            <span>Staff Feedback</span>
          </a>
        </li>

        <!-- Leave Management -->
        <li class="nav-item">
          {% url 'student_leave' as student_leave %}
          <a href="{% url  'student_leave' %}" class="nav-link {% if request.path == student_leave %} active {% endif %}">
            <i class="nav-icon bi bi-clock-history me-2"></i>
            <span>Student Leave</span>
          </a>
        </li>

        <li class="nav-item">
          {% url 'staff_leave' as staff_leave %}
          <a href="{% url 'staff_leave' %}" class="nav-link {% if request.path == staff_leave %} active {% endif %}">
            <i class="nav-icon bi bi-person-x me-2"></i>
            <span>Staff Leave</span>
          </a>
        </li>

        <!-- Attendance -->
        <li class="nav-item">
          {% url 'admin_view_attendance' as admin_view_attendance %}
          <a href="{{ admin_view_attendance }}" class="nav-link {% if request.path == admin_view_attendance %} active {% endif %}">
            <i class="nav-icon bi bi-eye me-2"></i>
            <span>View Attendance</span>
          </a>
        </li>
        <!-- Notification -->
        <li class="nav-item">
          {% url 'admin_send_notification_student' as admin_send_notification_student %}
          <a href="{{ admin_send_notification_student }}" class="nav-link {% if request.path == admin_send_notification_student %} active {% endif %}">
            <i class="nav-icon bi bi-chat-dots me-2"></i>
            <span>Notifying Students</span>
          </a>
        </li>

         <li class="nav-item">
          {% url 'admin_send_notification_staff' as admin_send_notification_staff %}
          <a href="{{ admin_send_notification_staff }}" class="nav-link {% if request.path == admin_send_notification_staff %} active {% endif %}">
            <i class="nav-icon bi bi-chat-dots me-2"></i>
            <span>Notifying Staffs</span>
          </a>
        </li>

      </ul>
    </nav>
  </div>
</aside>

<style>
/* Styles pour l'alignement parfait des icônes et texte */
.nav-sidebar .nav-link {
  display: flex !important;
  align-items: center !important;
  padding: 0.75rem 1rem !important;
}

.nav-sidebar .nav-icon {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 20px !important;
  font-size: 1.1rem !important;
}

.nav-sidebar .nav-link span {
  display: flex !important;
  align-items: center !important;
  flex: 1 !important;
}

/* Correction pour la hauteur de ligne */
.nav-sidebar .nav-item {
  line-height: 1.2 !important;
}

/* Assurer que tout soit centré verticalement */
.nav-sidebar .nav-link > * {
  vertical-align: middle !important;}
</style>